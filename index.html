<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Idle CLI Game</title>
  <style>
    body {
      background-color: #1e1e1e;
      color: #d4d4d4;
      font-family: monospace;
      margin: 0;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    #container {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    /* Left Panel (Command Line) */
    #cli-container {
      width: 50%;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    #cli-output-wrapper {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      white-space: pre-wrap;
    }
    #cli {
      display: flex;
      flex-direction: column;
    }
    .cli-line {
      display: flex;
      flex-wrap: wrap;
    }
    .cli-line input {
      background: none;
      border: none;
      color: #d4d4d4;
      font-family: monospace;
      font-size: 1em;
      flex: 1;
      outline: none;
    }
    /* Right Panel */
    #right-panel {
      width: 50%;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    /* Top Half of Right Panel (Game Updates + Settings) */
    #top-right-panel {
      display: flex;
      height: 50%;
    }
    .top-right-panel-section {
      width: 50%;
      padding: 20px;
      background-color: #2e2e2e;
      box-sizing: border-box;
      overflow-y: auto;
    }
    #game-updates {
      white-space: pre-wrap;
    }
    /* Bottom Half of Right Panel (Sidebar) */
    #sidebar {
      flex: 1;
      background-color: #2e2e2e;
      padding: 20px;
      box-sizing: border-box;
      overflow-y: auto;
    }
    /* Dropdown and Buttons in Sidebar */
    .dropdown-content {
      display: none;
      padding-left: 20px;
    }
    .dropdown.active .dropdown-content {
      display: block;
    }
    button {
      background-color: #444;
      color: white;
      border: none;
      padding: 8px;
      cursor: pointer;
      width: 100%;
    }
    select, label {
      margin: 10px 0;
      width: 100%;
      background-color: #444;
      color: white;
    }
  </style>
</head>
<body>
  <div id="container">
    <!-- Left Panel: Command Line -->
    <div id="cli-container">
      <h3>Command Line</h3>
      <div id="cli-output-wrapper">
        <div id="cli"></div>
      </div>
      <div id="cli-input-wrapper">
        <input id="cli-input" type="text" placeholder="Type command here..." onkeydown="handleCommand(event)">
      </div>
    </div>

    <!-- Right Panel: Split into Game Updates, Settings, and Sidebar -->
    <div id="right-panel">
      <!-- Top Right Panel (Game Updates + Settings) -->
      <div id="top-right-panel" style="display: flex; height: 50%;">
        <!-- Game Updates Section -->
        <div class="top-right-panel-section" id="game-updates-panel">
          <h3>Game Updates</h3>
          <div id="game-updates"></div>
        </div>
        <!-- Settings Section -->
        <div class="top-right-panel-section" id="settings-panel">
          <h3>Settings</h3>
          <label for="theme-select">Theme</label>
          <select id="theme-select">
            <option value="dark">Dark</option>
            <option value="light">Light</option>
          </select>
        </div>
      </div>

      <!-- Bottom Right Panel (Sidebar) -->
      <div id="sidebar">
        <h3>Sidebar</h3>
        <div class="dropdown" id="upgrades-dropdown">
          <button onclick="toggleDropdown('upgrades-dropdown')">Upgrades</button>
          <div class="dropdown-content" id="upgrades"></div>
        </div>
        <div class="dropdown" id="prestige-dropdown">
          <button onclick="toggleDropdown('prestige-dropdown')">Prestige</button>
          <div class="dropdown-content" id="prestige">
            <button onclick="prestige()">Prestige</button>
          </div>
        </div>
        <h4>Resources</h4>
        <div id="resource-counts">
          <div>Axe: <span id="axe-count">0</span></div>
          <div>Saw: <span id="saw-count">0</span></div>
          <div>Pickaxe: <span id="pickaxe-count">0</span></div>
          <div>Drill: <span id="drill-count">0</span></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let resources = {
      axe: 0,
      saw: 0,
      pickaxe: 0,
      drill: 0
    };

    let upgrades = {
      axe: { cost: 10, level: 0 },
      saw: { cost: 5, level: 0 },
      pickaxe: { cost: 15, level: 0 },
      drill: { cost: 7, level: 0 }
    };

    let settings = {
      theme: "dark"
    };

    function updateUI() {
      document.body.style.backgroundColor = settings.theme === "dark" ? "#1e1e1e" : "#f5f5f5";
      document.body.style.color = settings.theme === "dark" ? "#d4d4d4" : "#333";
      updateResources();
      updateUpgrades();
    }

    function updateResources() {
      let output = '';
      for (const resource in resources) {
        output += `${resource.charAt(0).toUpperCase() + resource.slice(1)}: ${resources[resource]}\n`;
      }
      document.getElementById("cli").innerText = output;
      document.getElementById("axe-count").innerText = resources.axe;
      document.getElementById("saw-count").innerText = resources.saw;
      document.getElementById("pickaxe-count").innerText = resources.pickaxe;
      document.getElementById("drill-count").innerText = resources.drill;
    }

    function updateUpgrades() {
      let upgradesHtml = '';
      for (const key in upgrades) {
        const upgrade = upgrades[key];
        upgradesHtml += `
          <div>
            <span>${key.charAt(0).toUpperCase() + key.slice(1)}</span><br>
            <span>Cost: ${upgrade.cost}</span><br>
            <button onclick="buyUpgrade('${key}')">Upgrade</button>
          </div><br>
        `;
      }
      document.getElementById("upgrades").innerHTML = upgradesHtml;
    }

    function buyUpgrade(upgradeType) {
      const upgrade = upgrades[upgradeType];
      if (resources[upgradeType] >= upgrade.cost) {
        resources[upgradeType] -= upgrade.cost;
        upgrade.level++;
        upgrade.cost = Math.round(upgrade.cost * 1.5); // Increasing cost exponentially
        updateUI();
        logGameUpdate(`${upgradeType.charAt(0).toUpperCase() + upgradeType.slice(1)} upgraded to level ${upgrade.level}`);
      } else {
        logGameUpdate(`Not enough resources to upgrade ${upgradeType}`);
      }
    }

    function logGameUpdate(message) {
      const gameUpdates = document.getElementById("game-updates");
      gameUpdates.innerHTML = `<div>${message}</div>` + gameUpdates.innerHTML;
    }

    function prestige() {
      // Handle prestige here (e.g., reset game with bonuses)
      logGameUpdate("Prestige activated!");
    }

    function toggleDropdown(id) {
      const dropdown = document.getElementById(id);
      dropdown.classList.toggle('active');
    }

    function handleCommand(event) {
      if (event.key === "Enter") {
        const command = document.getElementById("cli-input").value.trim();
        document.getElementById("cli-input").value = '';
        logGameUpdate(`> ${command}`);

        // Example command processing (expand as needed)
        if (command === "gather") {
          resources.axe += 1;
          resources.saw += 1;
          updateUI();
          logGameUpdate("Resources gathered!");
        } else if (command === "mine") {
          resources.pickaxe += 1;
          resources.drill += 1;
          updateUI();
          logGameUpdate("Resources mined!");
        } else {
          logGameUpdate(`Unknown command: ${command}`);
        }
      }
    }

    document.getElementById("theme-select").addEventListener("change", function () {
      settings.theme = this.value;
      updateUI();
    });

    // Initialize
    updateUI();
  </script>
</body>
</html>
